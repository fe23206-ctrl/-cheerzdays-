<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>cheerzdays-åˆã‚ã¾ã—ã¦ã€ã¾ãŸä¼šãŠã†ã­-</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:'Poppins',sans-serif;
  background:linear-gradient(180deg,#ffe8d6,#ffb88c);
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
}

/* ã‚¿ã‚¤ãƒˆãƒ« */
.header{
  position:absolute;
  top:40px;
  text-align:center;
  color:white;
  font-family:'Playfair Display',serif;
  letter-spacing:3px;
}

.header h1{
  margin:0;
  font-size:24px;
}

.header p{
  margin:5px 0 0;
  font-size:13px;
  opacity:0.85;
}

/* ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚«ãƒ¼ãƒ‰ */
.preview-wrapper{
  width:90vw;
  max-width:520px;
  aspect-ratio:1/1;
  border-radius:30px;
  background:rgba(255,255,255,0.25);
  backdrop-filter:blur(20px);
  box-shadow:0 30px 70px rgba(0,0,0,0.15);
  display:flex;
  align-items:center;
  justify-content:center;
  position:relative;
  overflow:hidden;
  cursor:pointer;
  transition:0.3s;
}

.preview-wrapper:hover{
  transform:scale(1.02);
}

/* ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ */
.placeholder{
  position:absolute;
  color:white;
  text-align:center;
  font-size:15px;
  opacity:0.9;
}

canvas{
  width:100%;
  height:100%;
  display:none;
}

/* ä¸‹éƒ¨UI */
.controls{
  position:absolute;
  bottom:40px;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:15px;
}

input[type="file"]{
  display:none;
}

input[type="text"]{
  padding:12px 18px;
  border-radius:30px;
  border:none;
  width:220px;
  text-align:center;
  font-size:14px;
  outline:none;
}

.download-btn{
  padding:10px 20px;
  border-radius:25px;
  background:white;
  text-decoration:none;
  font-size:13px;
  color:#444;
  display:none;
}
</style>
</head>

<body>

<div class="header">
  <h1>cheerzdays</h1>
  <p>åˆã‚ã¾ã—ã¦ã€ã¾ãŸä¼šãŠã†ã­</p>
</div>

<div class="preview-wrapper" onclick="triggerUpload()">
  <div class="placeholder" id="placeholder">
    ğŸ“·<br><br>
    ã‚¿ãƒƒãƒ—ã—ã¦ç”»åƒã‚’é¸æŠ
  </div>
  <canvas id="canvas"></canvas>
</div>

<div class="controls">
  <input type="file" id="upload" accept="image/*">
  <input type="text" id="eventName" placeholder="ã‚¤ãƒ™ãƒ³ãƒˆå">
  <a id="download" class="download-btn" download="cheerzdays.png">ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</a>
</div>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
canvas.width = 1080;
canvas.height = 1080;

function triggerUpload(){
  document.getElementById("upload").click();
}

document.getElementById("upload").addEventListener("change",function(e){

  const file = e.target.files[0];
  if(!file) return;

  const reader = new FileReader();

  reader.onload=function(event){

    const img=new Image();
    img.onload=function(){

      /* èƒŒæ™¯ */
      const gradient=ctx.createLinearGradient(0,0,1080,1080);
      gradient.addColorStop(0,"#ffe8d6");
      gradient.addColorStop(1,"#ffb88c");
      ctx.fillStyle=gradient;
      ctx.fillRect(0,0,1080,1080);

      /* æ¯”ç‡ä¿æŒï¼ˆçµ¶å¯¾ã«ä¼¸ã³ãªã„ï¼‰ */
      const scale=Math.min(
        canvas.width/img.width,
        canvas.height/img.height
      );

      const drawWidth=img.width*scale;
      const drawHeight=img.height*scale;
      const offsetX=(canvas.width-drawWidth)/2;
      const offsetY=(canvas.height-drawHeight)/2;

      ctx.drawImage(img,offsetX,offsetY,drawWidth,drawHeight);

      /* ãƒ•ãƒ¬ãƒ¼ãƒ  */
      const frame=new Image();
      frame.src="frame.png";

      frame.onload=function(){
        ctx.drawImage(frame,0,0,1080,1080);

        ctx.font="bold 70px Playfair Display";
        ctx.fillStyle="#ffffff";
        ctx.textAlign="center";
        ctx.shadowColor="rgba(0,0,0,0.4)";
        ctx.shadowBlur=20;

        ctx.fillText(
          document.getElementById("eventName").value,
          540,
          1000
        );

        document.getElementById("download").href=canvas.toDataURL();
        document.getElementById("download").style.display="inline-block";
      }
    }
    img.src=event.target.result;
  }
  reader.readAsDataURL(file);

  /* UIåˆ‡ã‚Šæ›¿ãˆ */
  document.getElementById("placeholder").style.display="none";
  canvas.style.display="block";
});
</script>

</body>
</html>
