<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>cheerzdays</title>

<style>
body{
  margin:0;
  font-family:sans-serif;
  background:linear-gradient(135deg,#f5a24d,#ffb866);
  display:flex;
  justify-content:center;
}

.wrapper{
  width:100%;
  max-width:420px;
  background:#f3f3f3;
  padding:40px 25px 60px;
  box-sizing:border-box;
  text-align:center;
}

.title{
  font-size:34px;
  font-weight:900;
  color:#ff7a00;
  text-shadow:2px 2px 0 #ffd4a8;
}

.subtitle{
  font-size:14px;
  margin-bottom:30px;
}

.name-input{
  width:100%;
  height:52px;
  border-radius:30px;
  border:2px solid #ff7a00;
  padding:0 20px;
  box-sizing:border-box;
  margin-bottom:30px;
  font-size:15px;
}

.upload-box{
  position:relative;
  border:3px dashed #ff7a00;
  border-radius:30px;
  padding:50px 20px;
  background:#fff3e6;
  cursor:pointer;
}

.upload-box input{
  position:absolute;
  width:100%;
  height:100%;
  opacity:0;
  top:0;
  left:0;
  cursor:pointer;
}

button{
  width:100%;
  margin-top:25px;
  padding:14px;
  border:none;
  border-radius:40px;
  background:#ff6a00;
  color:white;
  font-weight:700;
  cursor:pointer;
}

canvas{
  width:100%;
  margin-top:25px;
  border-radius:20px;
}
</style>
</head>

<body>

<div class="wrapper">

  <div class="title">cheerzdays</div>
  <div class="subtitle">åˆã‚ã¾ã—ã¦ã€ã¾ãŸä¼šãŠã†ã­</div>

  <input type="text" id="nameInput" class="name-input" placeholder="åå‰ã‚’å…¥åŠ›">

  <label class="upload-box">
    ğŸ“· ã‚¿ãƒƒãƒ—ã—ã¦ç”»åƒã‚’é¸æŠ<br>
    PNG / JPG å¯¾å¿œ
    <input type="file" id="upload" accept="image/*">
  </label>

  <button onclick="generate()">ç”»åƒã‚’ç”Ÿæˆã™ã‚‹</button>

  <canvas id="canvas"></canvas>

</div>

<script>
function generate(){
  const file = document.getElementById("upload").files[0];
  if(!file){
    alert("ç”»åƒã‚’é¸æŠã—ã¦ãã ã•ã„");
    return;
  }

  const canvas = document.getElementById("canvas");
  const ctx = canvas.getContext("2d");

  const reader = new FileReader();

  reader.onload = function(e){
    const img = new Image();
    img.onload = function(){

      canvas.width = 1080;
      canvas.height = 1080;

      ctx.clearRect(0,0,canvas.width,canvas.height);

      const canvasRatio = canvas.width / canvas.height;
      const imgRatio = img.width / img.height;

      let drawWidth, drawHeight, offsetX, offsetY;

      if(imgRatio > canvasRatio){
        drawHeight = canvas.height;
        drawWidth = img.width * (canvas.height / img.height);
        offsetX = (canvas.width - drawWidth) / 2;
        offsetY = 0;
      }else{
        drawWidth = canvas.width;
        drawHeight = img.height * (canvas.width / img.width);
        offsetX = 0;
        offsetY = (canvas.height - drawHeight) / 2;
      }

      ctx.drawImage(img, offsetX, offsetY, drawWidth, drawHeight);

      // åå‰è¡¨ç¤º
      ctx.font="bold 70px sans-serif";
      ctx.fillStyle="#ffffff";
      ctx.textAlign="center";
      ctx.shadowColor="rgba(0,0,0,0.4)";
      ctx.shadowBlur=20;

      ctx.fillText(
        document.getElementById("nameInput").value,
        540,
        1000
      );
    }
    img.src = e.target.result;
  }

  reader.readAsDataURL(file);
}
</script>

</body>
</html>
